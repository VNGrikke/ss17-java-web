<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω ƒë∆°n h√†ng</title>
</head>
<body>
<div>
    <div th:replace="fragments/layout :: body"></div>
</div>
<div>
    <h1>Qu·∫£n l√Ω ƒë∆°n h√†ng</h1>

    <!-- Form l·ªçc -->
    <form th:action="@{/admin/orders}" method="get">
        <input type="text" name="keyword" th:value="${keyword}" placeholder="T√¨m theo t√™n"/>

        <select name="status">
            <option value="">-- Tr·∫°ng th√°i --</option>
            <option value="PENDING" th:selected="${status == 'PENDING'}">Ch·ªù x√°c nh·∫≠n</option>
            <option value="CONFIRMED" th:selected="${status == 'CONFIRMED'}">ƒê√£ x√°c nh·∫≠n</option>
            <option value="CANCELLED" th:selected="${status == 'CANCELLED'}">ƒê√£ h·ªßy</option>
        </select>

        <input type="date" name="from" th:value="${from}"/>
        <input type="date" name="to" th:value="${to}"/>

        <button type="submit">L·ªçc</button>
    </form>

    <!-- B·∫£ng danh s√°ch -->
    <div>
        <table>
            <thead>
            <tr>
                <th>#</th>
                <th>Kh√°ch h√†ng</th>
                <th>SƒêT</th>
                <th>ƒê·ªãa ch·ªâ</th>
                <th>Ng√†y ƒë·∫∑t</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order, iterStat : ${orders}">
                <td th:text="${(currentPage - 1) * pageSize + iterStat.index + 1}"></td>
                <td th:text="${order.recipientName}"></td>
                <td th:text="${order.phone}"></td>
                <td th:text="${order.address}"></td>
                <td th:text="${order.orderDate}"></td>
                <td th:text="${order.status}"></td>
                <td>
                    <a th:href="@{/admin/orders/view/{id}(id=${order.id})}">üëÅÔ∏è</a>
                    <a th:href="@{/admin/orders/confirm/{id}(id=${order.id})}"
                       th:if="${order.status.name() == 'PENDING'}">‚úÖ</a>
                    <a th:href="@{/admin/orders/cancel/{id}(id=${order.id})}"
                       th:if="${order.status.name() == 'PENDING'}">‚ùå</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Ph√¢n trang -->
    <div>
        <ul>
            <li th:if="${currentPage > 1}">
                <a th:href="@{/admin/orders(page=${currentPage - 1})}">¬´</a>
            </li>
            <li th:each="i : ${#numbers.sequence(1, totalPages)}">
                <a th:href="@{/admin/orders(page=${i})}"
                   th:text="${i}"></a>
            </li>
            <li th:if="${currentPage < totalPages}">
                <a th:href="@{/admin/orders(page=${currentPage + 1})}">¬ª</a>
            </li>
        </ul>
    </div>
</div>
</body>
</html>